{"version":3,"sources":["file:///E:/04Project/Cocos/Portal/assets/script/v2/Door.ts"],"names":["_decorator","Component","Vec3","Quat","v3","ccclass","executionOrder","Door","constructor","door","camera","position","rotation","getChildByName","updateDoorPlace","getDoorPlace","pos","rts","getWorldPosition","getWorldRotation","setDoorPlace","setWorldPosition","setWorldRotation","setCamPlace","getCamRts","setDoorPlaceByDoor","turnAround","euler","getEulerAngles","y","fromEuler","x","z"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,E,OAAAA,E;;;;;;;;;OAC5C;AAAEC,QAAAA,OAAF;AAAUC,QAAAA;AAAV,O,GAA6BN,U;;sBAItBO,I,WAFZF,OAAO,CAAC,MAAD,C,UACPC,cAAc,CAAC,CAAC,CAAF,C,+BADf,MAEaC,IAFb,SAE0BN,SAF1B,CAEmC;AAE/BO,QAAAA,WAAW,CAACC,IAAD,EAAW;AAClB;AADkB,eAOfA,IAPe;AAAA,eASfC,MATe;AAAA,eAWfC,QAXe,GAWC,IAAIT,IAAJ,EAXD;AAAA,eAafU,QAbe,GAaC,IAAIT,IAAJ,EAbD;AAElB,eAAKM,IAAL,GAAYA,IAAZ;AACA,eAAKC,MAAL,GAAc,KAAKD,IAAL,CAAUI,cAAV,CAAyB,QAAzB,CAAd;AACA,eAAKC,eAAL;AACH,SAP8B,CAQ/B;;;AAQA;AACOC,QAAAA,YAAY,CAACC,GAAD,EAAUC,GAAV,EAAmB;AAClC,eAAKR,IAAL,CAAUS,gBAAV,CAA2BF,GAA3B;AACA,eAAKP,IAAL,CAAUU,gBAAV,CAA2BF,GAA3B;AACH,SApB8B,CAqB/B;;;AACOG,QAAAA,YAAY,CAACJ,GAAD,EAAUC,GAAV,EAAmB;AAClC,eAAKR,IAAL,CAAUY,gBAAV,CAA2BL,GAA3B;AACA,eAAKP,IAAL,CAAUa,gBAAV,CAA2BL,GAA3B;AACA,eAAKH,eAAL;AACH,SA1B8B,CA2B/B;;;AACOS,QAAAA,WAAW,CAACP,GAAD,EAAUC,GAAV,EAAmB;AACjC,eAAKP,MAAL,CAAYW,gBAAZ,CAA6BL,GAA7B;AACA,eAAKN,MAAL,CAAYY,gBAAZ,CAA6BL,GAA7B;AACH,SA/B8B,CAgC/B;;;AACOO,QAAAA,SAAS,CAACP,GAAD,EAAU;AACtB,eAAKP,MAAL,CAAYS,gBAAZ,CAA6BF,GAA7B;AACH,SAnC8B,CAoC/B;;;AACOQ,QAAAA,kBAAkB,CAAChB,IAAD,EAAW;AAChC,eAAKA,IAAL,CAAUY,gBAAV,CAA2BZ,IAAI,CAACE,QAAhC;AACA,eAAKF,IAAL,CAAUa,gBAAV,CAA2Bb,IAAI,CAACG,QAAhC;AACA,eAAKE,eAAL;AACH,SAzC8B,CA0C/B;;;AACOA,QAAAA,eAAe,GAAE;AACpB,eAAKL,IAAL,CAAUS,gBAAV,CAA2B,KAAKP,QAAhC;AACA,eAAKF,IAAL,CAAUU,gBAAV,CAA2B,KAAKP,QAAhC;AAEH,SA/C8B,CAgD/B;;;AACOc,QAAAA,UAAU,GAAE;AACf,cAAIC,KAAU,GAAGvB,EAAE,EAAnB;AACA,eAAKQ,QAAL,CAAcgB,cAAd,CAA6BD,KAA7B;AACAA,UAAAA,KAAK,CAACE,CAAN,IAAS,GAAT;AACA1B,UAAAA,IAAI,CAAC2B,SAAL,CAAe,KAAKlB,QAApB,EAA6Be,KAAK,CAACI,CAAnC,EAAqCJ,KAAK,CAACE,CAA3C,EAA6CF,KAAK,CAACK,CAAnD;AACA,eAAKZ,YAAL,CAAkB,KAAKT,QAAvB,EAAgC,KAAKC,QAArC;AACH;;AAvD8B,O","sourcesContent":["import { _decorator, Component, Node, Vec3, Quat, v3 } from 'cc';\nconst { ccclass,executionOrder } = _decorator;\n\n@ccclass('Door')\n@executionOrder(-1)\nexport class Door extends Component{\n\n    constructor(door:Node){\n        super();\n        this.door = door;\n        this.camera = this.door.getChildByName(\"Camera\");\n        this.updateDoorPlace();\n    }\n    // 门的节点\n    public door:Node;\n    //相机的节点 \n    public camera:Node;\n    // 世界坐标\n    public position:Vec3 = new Vec3();\n    // 世界朝向\n    public rotation:Quat = new Quat();\n    // 获取门的位置\n    public getDoorPlace(pos:Vec3,rts:Quat){\n        this.door.getWorldPosition(pos);\n        this.door.getWorldRotation(rts);\n    }\n    // 设置门的位置\n    public setDoorPlace(pos:Vec3,rts:Quat){\n        this.door.setWorldPosition(pos);\n        this.door.setWorldRotation(rts);\n        this.updateDoorPlace();\n    }\n    // 设置相机的位置\n    public setCamPlace(pos:Vec3,rts:Quat){\n        this.camera.setWorldPosition(pos);\n        this.camera.setWorldRotation(rts);\n    }\n    //获取相机朝向\n    public getCamRts(rts:Quat){\n        this.camera.getWorldRotation(rts);\n    }\n    // 以门为参数设置门的位置\n    public setDoorPlaceByDoor(door:Door){\n        this.door.setWorldPosition(door.position);\n        this.door.setWorldRotation(door.rotation);\n        this.updateDoorPlace();\n    }\n    //更新门的位置\n    public updateDoorPlace(){\n        this.door.getWorldPosition(this.position);\n        this.door.getWorldRotation(this.rotation);\n        \n    }\n    //旋转门\n    public turnAround(){\n        let euler:Vec3 = v3()\n        this.rotation.getEulerAngles(euler);\n        euler.y-=180;\n        Quat.fromEuler(this.rotation,euler.x,euler.y,euler.z);\n        this.setDoorPlace(this.position,this.rotation);\n    }\n}\n\n"]}